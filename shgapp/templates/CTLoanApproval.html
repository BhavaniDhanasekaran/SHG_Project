{% extends 'base.html' %}
{% load staticfiles %}
{% block javascript %}
<script src="{% static 'datajs/grouplist.js' %}"></script>
<script src="{% static 'datajs/loadTaskList.js' %}"></script>
<script src="{% static 'datajs/masterData.js' %}"></script>
<script src="{% static 'datajs/mysidenav.js' %}"></script>
<script>
    var groupId = '{{ groupId | escapejs }}';
    var group= '{{ group | escapejs }}';
    var loanId = '{{ loanId | escapejs }}';
    var taskName = '{{ taskName | escapejs }}';
    var taskId = '{{ taskId | escapejs }}';
    var processInstanceId = '{{ processInstanceId | escapejs }}';

    $(document).ready(function(){
    taskCount();
    loadGroupRoles(groupId,loanId,taskName);
    rmGroupMaster(groupId);
    getHistComments(processInstanceId);
    //creditHistory(loanId);
    documentView(loanId);
    getLoanDetails(groupId,loanId);

    });
</script>
<script type="text/javascript">
    $(document).ready(function() {
        $("#drop").click(function(){
            var dropMember = [];
            $.each($("input[name='drop']:checked"), function(){
                dropMember.push($(this).val());
            });
            $.alert("selected Group ID: " + dropMember.join(", "));
              dropMemberDetail(loanId,dropMember,groupId);
        });
    });
</script>
<script type="text/javascript">
    $(document).ready(function() {
        $("#drop").click(function(){
            var favorite = [];
            $.each($("input[name='drop']:checked"), function(){
                favorite.push($(this).val());
            });
            $.alert("selected Member ID: " + favorite.join(", "));
            //console.log(favorite);
        });
    });
</script>
<script type="text/javascript">
    function convertTableToJson()
        {
            var rows = [];
            $('table tr').not('thead tr').each(function(i, n){
                var $row = $(n);
                rows.push({
                    "memberId":   $row.find("td:eq(18) input[type='checkbox']").val(),
                    "loanAmount": $row.find("td:eq(7) input[type='text']").val(),
                    "awb":  $row.find("td:eq(8) input[type='text']").val(),
                    "insuranceAmount":  $row.find("td:eq(14) input[type='text']").val(),
                    "solarLight":  $row.find("td:eq(9) input[type='text']").val(),
                    "purpose":  $row.find("td:eq(17) input[type='text']").val(),
                    "atldebt": $row.find("td:eq(19) input[type='text']").val(),
                    "interest": $row.find("td:eq(20) input[type='text']").val(),
                    "prevMonthGroupBalance":  $row.find("td:eq(21) input[type='text']").val(),
                    "currentMonthCollection": $row.find("td:eq(22) input[type='text']").val(),
                    "currentMonthOutstanding":  $row.find("td:eq(23) input[type='text']").val(),
                    "prevLoanGroupAmount": $row.find("td:eq(24) input[type='text']").val(),
                    "sumOldActiveMembersAmount": $row.find("td:eq(25) input[type='text']").val(),
                    "memberLoanAmount":  $row.find("td:eq(26) input[type='text']").val(),
                    "groupId":$row.find("td:eq(27) input[type='text']").val(),
                    "loanTypeId": $row.find("td:eq(28) input[type='text']").val(),
                    "ATLloanId": $row.find("td:eq(29) input[type='text']").val(),
                    "ATLaccNo": $row.find("td:eq(30) input[type='text']").val()
                  });
                });
                return JSON.stringify(rows);
            };

    function update()
    {
        var updateloanData=convertTableToJson();
        console.log(updateloanData);
        updateloanDatail(updateloanData);
    }
</script>
<style>
    input[type="text"] {
    width: 80px;
    }
</style>
{% endblock %}
<!-- PAGE CONTENT BEGINS -->
{% block content %}
<div class="row">
<!--2row Start-->
<div class="col-xs-3 " >
    <!--second col-xs3 strat-->
    <div class="panel panel-default">
        <div class="panel-heading">PLL </div>
        <div class="panel-body">
            <div class="profile-user-info profile-user-info-striped">
                <div class="profile-info-row">
                    <div class="profile-info-name2"> SHG Name </div>
                    <div class="profile-info-value">
                        <span class="editable" id="groupName"></span>
                    </div>
                </div>
                <div class="profile-info-row">
                    <div class="profile-info-name2"> SHG ID </div>
                    <div class="profile-info-value">
                        <span class="editable" id="shgId"></span>
                    </div>
                </div>
                <div class="profile-info-row">
                    <div class="profile-info-name2"> No Of Members </div>
                    <div class="profile-info-value">
                        <span class="editable" id="groupCount"></span>
                    </div>
                </div>
                <div class="profile-info-row">
                    <div class="profile-info-name2"> Installments</div>
                    <div class="profile-info-value">
                        <input type="text" class="editable" id="loanInstallments"></input>
                    </div>
                </div>
                <br>
                <div class="profile-info-row">
                    <div class="profile-info-name2"> Loan Amount (INR):</div>
                    <div class="profile-info-value">
                        <span class="editable" id="loanAmount" style="float:right"></span>
                    </div>
                </div>
                <div class="profile-info-row">
                    <div class="profile-info-name2"> Processing Fee  (INR):</div>
                    <div class="profile-info-value">
                        <span class="editable" id="processingFee" style="float:right"></span>
                    </div>
                </div>
                <div class="profile-info-row">
                    <div class="profile-info-name2"> Service Tax (INR):</div>
                    <div class="profile-info-value">
                        <span class="editable" id="serviceTax" style="float:right"></span>
                    </div>
                </div>
                <div class="profile-info-row">
                    <div class="profile-info-name2"> Education Cess (INR):</div>
                    <div class="profile-info-value">
                        <span class="editable" id="educationCess" style="float:right"></span>
                    </div>
                </div>
                <div class="profile-info-row">
                    <div class="profile-info-name2"> AWB (INR):</div>
                    <div class="profile-info-value">
                        <span class="editable" id="awb" style="float:right"></span>
                    </div>
                </div>
                <div class="profile-info-row">
                    <div class="profile-info-name2"> Sundry Debt(ATL) (INR)):</div>
                    <div class="profile-info-value">
                        <span class="editable" id="sundryDebt" style="float:right"></span>
                    </div>
                </div>
                <div class="profile-info-row">
                    <div class="profile-info-name2"> Insurance (INR):</div>
                    <div class="profile-info-value">
                        <span class="editable" id="insuranceAmount" style="float:right"></span>
                    </div>
                </div>
                <div class="profile-info-row">
                    <div class="profile-info-name2"> Net Loan Amount (INR):</div>
                    <div class="profile-info-value">
                        <span class="editable" id="netLoanAmount" style="float:right"></span>
                    </div>
                </div>
            </div>
        </div>
        <!--panel body endend-->
    </div>
    <!--second col-xs3 end-->
</div>
<!--second row end-->
<div class="col-xs-9" >
    <!--2row Start col-10 start-->
    <div class="panel panel-default">
        <div class="panel-heading">Rose Group (3242423 ) </div>
        <div class="panel-body-danger">
            <!--2row panel body start-->
            <div class="tabbable">
                <ul class="nav nav-tabs padding-12 tab-color-blue background-blue" id="myTab4">
                    <li class="active"><a data-toggle="tab" href="#upload">payment</a></li>
                    <li><a data-toggle="tab" href="#dropdown14">Documents</a></li>
                </ul>
                <div class="tab-content">
                    <div id="upload" class="tab-pane in active">
                        <!-- form start-->
                        <section>
                            <!---upload doc startion-->
                            <div id="payment" class="tab-pane in active">
                                <section >
                                    <div class="page-content">
                                        <div class="row">
                                            <div class="col-xs-12">
                                                <!-- PAGE CONTENT BEGINS -->
                                                <div class="col-xs-12 col-sm-6  col-md-12 widget-container-col" id="widget-container-col-2">
                                                    <div class="widget-box widget-color-blue" id="widget-box-2">
                                                        <div class="widget-header">
                                                            <h5 class="widget-title bigger lighter"> Credit Enquiry </h5>
                                                            <div class="widget-toolbar widget-toolbar-light no-border">
                                                                <select id="simple-colorpicker-1" class="hide">
                                                                    <option selected="" data-class="blue" value="#981b1b">#307ECC</option>
                                                                    <option data-class="blue2" value="#981b1b">#5090C1</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="widget-body" style="height:500px;overflow:scroll;overflow-y:scroll;overflow-x:scroll;">
                                                            <div class="widget-main no-padding">
                                                                <table class="table table-striped table-bordered table-hover" >
                                                                    <thead class="thin-border-bottom">
                                                                        <tr>
                                                                            <th> S.NO</th>
                                                                            <th>App Memeber id</th>
                                                                            <th>New Memeber</th>
                                                                            <th>Name</th>
                                                                            <th>SB A/C Number</th>
                                                                            <th>Bank Name</th>
                                                                            <th>Previous loan Amount</th>
                                                                            <th>Loan Amount</th>
                                                                            <th>AWB</th>
                                                                            <th>Solar Light</th>
                                                                            <th>ATL/ELL SUndry Debt</th>
                                                                            <th>Processing Fee</th>
                                                                            <th>Service Tax</th>
                                                                            <th>Education Cess</th>
                                                                            <th>Insurance</th>
                                                                            <th>Net Amount</th>
                                                                            <th>staus</th>
                                                                            <th>Pupose</th>
                                                                            <th>Drop Member</th>
                                                                            <th style="display:none">19atldebt</th>
                                                                            <th style="display:none"> 20 interest</th>
                                                                            <th style="display:none">21prevMonthGroupBalance</th>
                                                                            <th style="display:none">22 currentMonthCollection</th>
                                                                            <th style="display:none">23currentMonthOutstanding</th>
                                                                            <th style="display:none">24prevLoanGroupAmount</th>
                                                                            <th style="display:none"> 25sumOldActiveMembersAmount</th>
                                                                            <th style="display:none"> 26memberLoanAmount</th>
                                                                            <th style="display:none">27groupId</th>
                                                                            <th style="display:none">28 loanTypeId</th>
                                                                            <th style="display:none"> 29 ATLloanId</th>
                                                                            <th style="display:none"> 30 ATLaccNo</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody  id="loandata">
                                                                    </tbody>
                                                                </table>
                                                                <button type="button" id="drop">Drop Members</button>
                                                                <button type="button" onclick="update();">Update Members</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- /.span -->
                                            </div>
                                            <!-- /.row -->
                                            <!-- PAGE CONTENT ENDS -->
                                        </div>
                                        <!-- /.col -->
                                    </div>
                                </section>
                            </div>
                            <!-- payment tab start  -->
                            <!--upload doc end-->
                        </section>
                        <!-- SECTION END -->
                    </div>
                    <!--form End-->
                    <!-- Document tab start  -->
                    <div id="dropdown14" class="tab-pane">
                        <div class="page-content">
                            <div class="row">
                                <div class="col-xs-12">
                                    <!-- PAGE CONTENT BEGINS -->
                                    <div class="col-xs-12 col-sm-6  col-md-12 widget-container-col" id="widget-container-col-2">
                                        <div class="widget-box widget-color-blue" id="widget-box-2">
                                            <div class="widget-header">
                                                <h5 class="widget-title bigger lighter">
                                                    Credit Enquiry
                                                </h5>
                                                <div class="widget-toolbar widget-toolbar-light no-border">
                                                    <select id="simple-colorpicker-1" class="hide">
                                                        <option selected="" data-class="blue" value="#981b1b">#307ECC</option>
                                                        <option data-class="blue2" value="#981b1b">#5090C1</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="widget-body">
                                                <div class="widget-main no-padding">
                                                    <table class="table table-striped table-bordered table-hover">
                                                        <thead class="thin-border-bottom">
                                                            <tr>
                                                                <th><i class="ace-icon fa fa-user"></i>S.No</th>
                                                                <th><i class="ace-icon fa fa-user"></i>Document List</th>
                                                                <th><i class="ace-icon fa fa-user"></i>Action</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td class="">1</td>
                                                                <td class="">Document 1</td>
                                                                <td class="">View</td>
                                                            </tr>
                                                            <tr>
                                                                <td class="">2</td>
                                                                <td class="">Document 2</td>
                                                                <td class="">View</td>
                                                            </tr>
                                                            <tr>
                                                                <td class="">3</td>
                                                                <td class="">Document 3</td>
                                                                <td class="">View</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- /.span -->
                                </div>
                                <!-- /.row -->
                                <!-- PAGE CONTENT ENDS -->
                            </div>
                            <!-- /.col -->
                        </div>
                    </div>
                    <!-- Document tab ens  -->
                </div>
                <!-- TAB END-->
            </div>
            <!--2row panel body end-->
        </div>
    </div>
    <!--2row Start col-10 End-->
</div>
<!--2row End-->
<div class="row">
    <div class="col-md-offset-3 col-xs-9">
        <div class="clearfix form-actions">
            <div class="col-md-offset-3 col-md-9">
                <button class="btn btn-danger" type="button">
                <i class="ace-icon fa fa-check bigger-110"></i>
                Approve
                </button>
            </div>
        </div>
    </div>
</div>
{% include 'query.html' %}
{% endblock content %}